# Example environment for local development and Docker
# Toggle no-db demo mode (if true the app runs without Postgres)
NO_DB=true

# HTTP
HOST=0.0.0.0
PORT=8000
UVICORN_WORKERS=1

# Backpressure / queue / worker pool
CONCURRENCY=50             # max concurrent in-flight request handlers
QUEUE_SIZE=200             # bounded queue for background tasks
WORKER_POOL_SIZE=8         # number of background workers
REQUEST_TIMEOUT=15         # seconds per request
DOWNSTREAM_TIMEOUT=2       # seconds talking to simulated downstream
RETRIES=2                  # retries against downstream
RETRY_JITTER_MS=100        # jitter in ms

# Circuit breaker
CB_FAILURE_THRESHOLD=5     # consecutive failures to open
CB_RECOVERY_SECONDS=30     # how long to stay open before half-open

# Postgres (if NO_DB=false you can set DB_URL; otherwise these are ignored)
DB_URL=postgres://postgres:postgres@localhost:5432/appdb
DB_HOST=localhost
DB_PORT=5432
POSTGRES_POOL_MIN=1
POSTGRES_POOL_MAX=5

# Observability
PROMETHEUS_PORT=9100
LOG_LEVEL=info
OTEL_SERVICE_NAME=fastapi-backpressure-demo
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Locust / load testing
LOCUST_USERS=100
LOCUST_SPAWN_RATE=10

# Other
TZ=UTC
